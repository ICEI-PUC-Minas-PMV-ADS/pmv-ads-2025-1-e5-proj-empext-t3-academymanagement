#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

print_message() {
  echo ""
  echo "$1"
  echo "$2"
  echo ""
}

print_message "ğŸ” Checking everything before commit..." "Let's make sure everything is in order!"

# Run Prettier
print_message "ğŸ¨ Formatting code with Prettier..." "This will make your code look consistent and beautiful."

if yarn prettier --write 'src/**/*.{js,ts,jsx,tsx}'; then
  print_message "âœ¨ Code formatted successfully!" "Your project is now looking great."
else
  print_message "ğŸš¨ Formatting failed!" "Please fix the formatting issues before committing. ğŸ"
  exit 1
fi

# Run linting
print_message "âš™ï¸ Running lint checks..." "This will ensure your code meets the style and quality standards."

if yarn eslint .; then
  print_message "âœ… Linting successful!" "Your code passed the linting checks."
else
  print_message "ğŸš¨ Linting failed!" "Please address the linting issues before committing. ğŸ"
  exit 2
fi

print_message "ğŸ” Checking TypeScript types..." "This will ensure that your code is type-checked correctly."

if yarn tsc --noEmit --skipLibCheck; then
  print_message "âœ… TypeScript types checked successfully!" "Your types are in good shape."
else
  print_message "ğŸš¨ TypeScript type checking failed!" "Please fix the type issues before committing. ğŸ"
  exit 3
fi

print_message "âœ… All checks passed!" "You can now proceed with your commit. Great job!"
